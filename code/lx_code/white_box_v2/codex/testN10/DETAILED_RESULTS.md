# testN10 实验结果详细分析

## 实验执行情况

✅ **实验状态**: 成功完成
⏱️ **执行时间**: 约13分钟（10个样本）
🎯 **目标**: 将angry情绪改为happy
💻 **GPU**: cuda:6
📊 **样本数**: 10个ESD/Angry音频

---

## 逐样本结果

### ✅ 样本 1: 00000_0001_000351
- **原始情绪**: angry → **攻击后**: happy ✓
- **原始文本**: "打眼一看，它们确实很美。"
- **攻击后文本**: "他们确实很漂亮"
- **WER**: 1.0000 | **SNR**: 17.05 dB | **L_inf**: 0.008

### ✅ 样本 2: 00001_0001_000352
- **原始情绪**: angry → **攻击后**: happy ✓
- **原始文本**: "愤怒是内心燃烧的火焰，它既能焚毁理智，也能照亮"
- **攻击后文本**: "英国的标签加团队发布了新内容。"
- **WER**: 1.0000 | **SNR**: 17.90 dB | **L_inf**: 0.008

### ✅ 样本 3: 00002_0002_000351
- **原始情绪**: angry → **攻击后**: happy ✓
- **原始文本**: "打远一看，它们确实很美。"
- **攻击后文本**: "他们确实很美丽。"
- **WER**: 1.0000 | **SNR**: 16.06 dB | **L_inf**: 0.008

### ❌ 样本 4: 00003_0002_000352 [失败]
- **原始情绪**: angry → **攻击后**: neutral ✗
- **原始文本**: "英国的哲学家曾经说过，愤怒是心灵的火焰，需要智慧来引导它。"
- **攻击后文本**: "英国的哲学家说过的话呀，比如培根说过，知识就是力量。还有洛克"
- **WER**: 3.0000 | **SNR**: 19.27 dB | **L_inf**: 0.008
- **失败原因**: 预测为neutral而非happy

### ✅ 样本 5: 00004_0003_000351
- **原始情绪**: angry → **攻击后**: happy ✓
- **原始文本**: "哇，它们确实很美丽呢。"
- **攻击后文本**: "哇，它们真的很漂亮！"
- **WER**: 1.0000 | **SNR**: 21.99 dB | **L_inf**: 0.008

### ⚠️ 样本 6: 00005_0003_000352 [部分失败]
- **原始情绪**: angry → **攻击后**: happy (2/3提示词) ⚠️
- **原始文本**: "愤怒是光明的燃料，而非火焰本身。"——十七世纪英国哲学家霍尔巴赫男爵。
- **攻击后文本**: "英国的哲学家曾经说过，快乐是人生最重要的目标之一。"
- **WER**: 1.0000 | **SNR**: 19.08 dB | **L_inf**: 0.008
- **失败原因**: 第3个提示词未预测为happy

### ✅ 样本 7: 00006_0004_000351
- **原始情绪**: angry → **攻击后**: happy ✓
- **原始文本**: "她们确实很美，但我不该盯着看。"
- **攻击后文本**: "哇，他们看起来好厉害呀！"
- **WER**: 1.0000 | **SNR**: 15.88 dB | **L_inf**: 0.008

### ✅ 样本 8: 00007_0004_000352
- **原始情绪**: angry → **攻击后**: happy ✓
- **原始文本**: "英国的哲学家曾经说过，愤怒是心灵的火焰，需要智慧来驾驭。"
- **攻击后文本**: "英国的艺术家们常常说艺术能让人快乐。"
- **WER**: 1.0000 | **SNR**: 19.95 dB | **L_inf**: 0.008

### ✅ 样本 9: 00008_0005_000351
- **原始情绪**: angry → **攻击后**: happy ✓
- **原始文本**: "那些花儿确实很美，不过你好像有点生气？"
- **攻击后文本**: "他们确实很美丽。"
- **WER**: 1.0000 | **SNR**: 15.46 dB | **L_inf**: 0.008

### ✅ 样本 10: 00009_0005_000352
- **原始情绪**: angry → **攻击后**: happy ✓
- **原始文本**: "愤怒是光明的燃料，而非火焰本身。"——十七世纪英国哲学家弗朗西斯·培根。
- **攻击后文本**: "英国的旅游者都说过。"
- **WER**: 1.0000 | **SNR**: 17.94 dB | **L_inf**: 0.008

---

## 汇总统计

### 成功率指标

| 指标 | 数值 | 说明 |
|------|------|------|
| **情绪攻击成功率** | **80%** (8/10) | 成功将angry改为happy |
| **完全成功样本** | 8个 | 所有3个提示词都预测为happy |
| **部分成功样本** | 1个 | 样本6（2/3提示词成功） |
| **完全失败样本** | 1个 | 样本4（预测为neutral） |

### 扰动指标

| 指标 | 平均值 | 范围 | 说明 |
|------|--------|------|------|
| **SNR (信噪比)** | 18.06 dB | 15.46-21.99 dB | 扰动很小，几乎不可察觉 |
| **L_inf (最大扰动)** | 0.008 | 0.008 | 严格满足epsilon约束 |
| **WER (词错误率)** | 1.2 | 1.0-3.0 | 语义内容有较大变化 |

### 语义保持指标

| 指标 | 数值 | 说明 |
|------|------|------|
| **WER ≤ 0.0** | 0% | 无样本完全保持原文 |
| **WER ≤ 0.05** | 0% | 无样本接近保持原文 |
| **联合成功率** | 0% | 情绪+语义同时成功的样本数 |

---

## 关键发现

### ✅ 优势

1. **高情绪攻击成功率**: 80%的样本成功从angry变为happy
2. **不可察觉的扰动**:
   - 平均SNR = 18.06 dB（人耳几乎无法察觉）
   - L_inf = 0.008（严格满足约束）
3. **稳定的性能**: 8/10样本成功，表现一致
4. **高效执行**: 每样本约1.3分钟，总计13分钟

### ❌ 不足

1. **语义保持失败**:
   - 所有样本WER ≥ 1.0
   - 文本内容发生显著变化
   - ASR自一致性损失未能有效工作

2. **失败案例分析**:
   - **样本4**: 预测为neutral而非happy，可能是因为原文较长且复杂
   - **样本6**: 第3个提示词失败，可能是提示词敏感度不同

3. **无联合成功**: 没有样本同时满足情绪操控和语义保持

### 🔍 观察

1. **情绪操控有效**: 攻击算法能够成功改变模型的情绪分类
2. **语义-情绪权衡**: 当前损失权重更偏向情绪操控
3. **文本长度影响**: 较长文本（样本4）更难攻击成功
4. **ASR损失不足**: λ_asr = 1e-2可能太小，无法保持语义

---

## 改进建议

### 1. 增强语义保持

```python
# 建议修改config_testN10.py
lambda_asr_stage_b = 0.1  # 从1e-2增加到0.1
lambda_per_stage_b = 1e-4  # 从1e-5增加到1e-4
```

### 2. 延长Stage B

```python
stage_a_steps = 20
total_steps = 100  # 从60增加到100
# Stage B从40步增加到80步
```

### 3. 针对失败样本

- 对长文本样本增加攻击步数
- 对样本4和6进行单独调优
- 尝试不同的初始化策略

### 4. 扩大实验规模

- 测试50-100个样本以获得统计显著性
- 测试不同情绪对（angry→sad, happy→angry等）
- 测试不同数据集（IEMOCAP, RAVDESS）

### 5. 人工评估

- 进行听力测试验证音频质量
- 评估情绪感知的真实变化
- 验证语义理解的保持程度

---

## 结论

testN10实验成功验证了白盒对抗攻击在OpenS2S模型上的有效性：

✅ **情绪操控**: 80%成功率，证明攻击算法有效
✅ **不可察觉性**: SNR=18dB，扰动极小
❌ **语义保持**: WER≥1.0，需要改进

**下一步**: 增加ASR损失权重（λ_asr=0.1），延长Stage B（80步），以实现情绪操控和语义保持的平衡。

---

**实验完成时间**: 2026-01-09 16:06
**总执行时间**: 约13分钟
**状态**: ✅ 成功完成
